(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7738:(e,t,s)=>{"use strict";let a,r;s.r(t),s.d(t,{default:()=>A});var l=s(4568),n=s(8538),i=s(2402),o=s(7635),c=s(1742),d=s(7749),u=s(4297),m=s(7620),x=s(8398),g=s(7122),b=s(3235),h=s(9548),f=s(1734),p=s(2780),y=s(8283),j=s(84);let N="https://rpc.zerodev.app/api/v3/b4bb59f8-71ab-45d7-b225-3b3be4e39db0/chain/11155111",v="https://rpc.zerodev.app/api/v3/b4bb59f8-71ab-45d7-b225-3b3be4e39db0/chain/11155111",w="https://passkeys.zerodev.app/api/v3/b4bb59f8-71ab-45d7-b225-3b3be4e39db0",C=j.G,k=(0,u.bP)("0.7"),S=u.iF,D="0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",U=(0,x.U)(["function balanceOf(address owner) external view returns (uint256)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function transfer(address to, uint256 amount) external returns (bool)"]),O=(0,g.l)({transport:(0,b.L)(),chain:C}),A=()=>{let[e,t]=(0,m.useState)(!1),[s,u]=(0,m.useState)("welcome"),[x,g]=(0,m.useState)(!1);if((0,m.useEffect)(()=>{t(!0)},[]),!e)return null;let j=()=>{u("register")},A=async()=>{g(!0);try{console.log("Attempting passkey login");let e=await (0,c.x2)({passkeyName:"beepboop-wallet",passkeyServerUrl:w,mode:c.A1.Login}),t=await (0,d.Yw)(O,{webAuthnKey:e,kernelVersion:S,entryPoint:k,validatorContractVersion:d.fO.V0_0_2});a=await (0,n.H)(O,{entryPoint:k,kernelVersion:S,plugins:{sudo:t}}),r=(0,i._)({account:a,chain:C,bundlerTransport:(0,b.L)(N),paymaster:{getPaymasterData:async e=>(await (0,o.H)({chain:C,transport:(0,b.L)(v)})).sponsorUserOperation({userOperation:e})}}),console.log("Login successful, account:",a.address),u("wallet")}catch(e){console.error("Login failed:",e),alert("Login failed. Please try again or register a new account.")}finally{g(!1)}},F=()=>(0,l.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return"register"===s?(0,l.jsx)(()=>{let[e,t]=(0,m.useState)(""),[s,x]=(0,m.useState)(!1),[g,h]=(0,m.useState)(""),f=async()=>{if(!e.trim())return void alert("Please enter a username");x(!0);try{console.log("Creating passkey for username:",e);let t=await (0,c.x2)({passkeyName:e,passkeyServerUrl:w,mode:c.A1.Register}),s=await (0,d.Yw)(O,{webAuthnKey:t,kernelVersion:S,entryPoint:k,validatorContractVersion:d.fO.V0_0_2});a=await (0,n.H)(O,{entryPoint:k,kernelVersion:S,plugins:{sudo:s}}),r=(0,i._)({account:a,chain:C,bundlerTransport:(0,b.L)(N),paymaster:{getPaymasterData:async e=>(await (0,o.H)({chain:C,transport:(0,b.L)(v)})).sponsorUserOperation({userOperation:e})}}),console.log("Account created successfully:",a.address),h(a.address)}catch(e){console.error("Registration failed:",e),alert("Registration failed. Please try again.")}finally{x(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md relative",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("button",{onClick:()=>{u("welcome")},className:"absolute top-4 left-4 p-2 text-gray-600 hover:text-gray-800 transition-colors",children:"← Back"}),(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD10"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Set up your secure passkey wallet"})]}),g?(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"✅"})}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Account Created!"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Your secure wallet is ready to use"}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Your wallet address:"}),(0,l.jsx)("p",{className:"font-mono text-sm text-gray-800 break-all",children:g})]}),(0,l.jsx)("button",{onClick:()=>u("wallet"),className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200",children:"Open Wallet"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"space-y-4 mb-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"reg-username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose a username"}),(0,l.jsx)("input",{id:"reg-username",type:"text",placeholder:"Enter your username",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors text-gray-900 placeholder-gray-500",disabled:s})]})}),(0,l.jsx)("button",{onClick:f,disabled:s,className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{}),(0,l.jsx)("span",{className:"ml-2",children:"Creating Passkey..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mr-2",children:"\uD83D\uDD11"}),"Create Passkey"]})}),(0,l.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"What is a passkey?"}),(0,l.jsx)("p",{className:"text-xs text-blue-700",children:"A passkey uses your device's biometric authentication (fingerprint, face, etc.) to securely access your wallet. No passwords needed!"})]})]})]})})},{}):"send"===s?(0,l.jsx)(()=>{let[e,t]=(0,m.useState)(""),[s,n]=(0,m.useState)(""),[i,o]=(0,m.useState)(!1),[c,d]=(0,m.useState)("0"),[x,g]=(0,m.useState)(""),[b,j]=(0,m.useState)(""),[N,v]=(0,m.useState)({recipient:"",amount:""});(0,m.useEffect)(()=>{(async()=>{if(null==a?void 0:a.address)try{let e=await O.readContract({address:D,abi:U,functionName:"balanceOf",args:[a.address]});d((0,h.J)(e,6))}catch(e){console.error("Error fetching balance for send:",e)}})()},[]);let w=()=>{let t={recipient:"",amount:""},a=!0;if(e.trim()?(0,f.P)(e)||(t.recipient="Invalid Ethereum address",a=!1):(t.recipient="Recipient address is required",a=!1),s.trim()){let e=parseFloat(s);isNaN(e)||e<=0?(t.amount="Amount must be greater than 0",a=!1):e>parseFloat(c)&&(t.amount="Insufficient balance",a=!1)}else t.amount="Amount is required",a=!1;return v(t),a},C=async()=>{if(w()){o(!0),j("Sending USDC..."),g("");try{console.log("Sending ".concat(s," USDC to ").concat(e));let l=await r.sendUserOperation({callData:await a.encodeCalls([{to:D,value:BigInt(0),data:(0,p.p)({abi:U,functionName:"transfer",args:[e,(0,y.X)(s,6)]})}])});console.log("UserOp submitted:",l),g(l),j("Transaction submitted, waiting for confirmation...");let i=await r.waitForUserOperationReceipt({hash:l});console.log("UserOp confirmed:",i.userOpHash),console.log("TxHash:",i.receipt.transactionHash);let o='✅ Transaction confirmed! <a href="https://jiffyscan.xyz/userOpHash/'.concat(l,'?network=sepolia" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:text-blue-700">View on JiffyScan</a>');j(o),setTimeout(()=>{t(""),n(""),g(""),j(""),u("wallet")},3e3)}catch(e){console.error("Send transaction failed:",e),j("❌ Transaction failed. Please try again.")}finally{o(!1)}}};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md relative",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("button",{onClick:()=>{u("wallet")},className:"absolute top-4 left-4 p-2 text-gray-600 hover:text-gray-800 transition-colors",children:"← Back"}),(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE4"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Send USDC"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Transfer USDC to another wallet"})]}),(0,l.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Available Balance"}),(0,l.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["$",c," USDC"]})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"recipient",className:"block text-sm font-medium text-gray-700 mb-2",children:"Recipient Address"}),(0,l.jsx)("input",{id:"recipient",type:"text",placeholder:"0x...",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-colors text-gray-900 placeholder-gray-500 ".concat(N.recipient?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500"),disabled:i}),N.recipient&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.recipient})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (USDC)"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:s,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-colors text-gray-900 placeholder-gray-500 ".concat(N.amount?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500"),disabled:i}),(0,l.jsx)("button",{onClick:()=>n(c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-blue-500 hover:text-blue-700 font-medium",disabled:i,children:"MAX"})]}),N.amount&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.amount})]}),(0,l.jsx)("button",{onClick:C,disabled:i||!e.trim()||!s.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{}),(0,l.jsx)("span",{className:"ml-2",children:"Sending..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE4"}),"Send USDC"]})}),x&&(0,l.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:"Transaction Status:"}),(0,l.jsx)("div",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:b}}),x&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"UserOp Hash:"}),(0,l.jsx)("p",{className:"font-mono text-xs text-gray-800 break-all",children:x})]})]})}),(0,l.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-yellow-900 mb-2",children:"Transaction Details"}),(0,l.jsxs)("ul",{className:"text-xs text-yellow-700 space-y-1",children:[(0,l.jsx)("li",{children:"• Network: Sepolia Testnet"}),(0,l.jsx)("li",{children:"• Gas fees: Sponsored by paymaster"}),(0,l.jsx)("li",{children:"• Transaction is irreversible"})]})]})]})]})})},{}):"wallet"===s?(0,l.jsx)(()=>{let[e,t]=(0,m.useState)("0.00"),[s,r]=(0,m.useState)(!0),n=async()=>{if(null==a?void 0:a.address){r(!0);try{console.log("Fetching USDC balance for:",a.address);let e=await O.readContract({address:D,abi:U,functionName:"balanceOf",args:[a.address]}),s=(0,h.J)(e,6);t(parseFloat(s).toFixed(2)),console.log("USDC Balance:",s)}catch(e){console.error("Error fetching USDC balance:",e),t("Error")}finally{r(!1)}}};return(0,m.useEffect)(()=>{n()},[a]),(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-green-600 rounded-full mb-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your Wallet"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Welcome to your secure stablecoin wallet"})]}),a&&(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Wallet Address:"}),(0,l.jsx)("p",{className:"font-mono text-sm text-gray-800 break-all",children:a.address})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"USDC Balance"}),s&&(0,l.jsx)("div",{className:"ml-2",children:(0,l.jsxs)("svg",{className:"animate-spin h-4 w-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["$",e]}),(0,l.jsx)("button",{onClick:n,disabled:s,className:"ml-2 p-1 text-blue-500 hover:text-blue-700 disabled:opacity-50",title:"Refresh balance",children:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),(0,l.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Sepolia Testnet • Contract: ",D.slice(0,8),"..."]})]}),(0,l.jsx)("button",{onClick:()=>u("send"),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200",children:"Send USDC"}),(0,l.jsx)("button",{onClick:()=>alert("Receive functionality coming soon!"),className:"w-full px-4 py-3 bg-white text-gray-700 font-medium rounded-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all duration-200",children:"Receive USDC"})]}),(0,l.jsx)("button",{onClick:()=>u("welcome"),className:"w-full mt-6 px-4 py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Sign Out"})]})})},{}):(0,l.jsx)(()=>(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"})}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"beepboop"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Your secure stablecoin wallet"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("button",{onClick:j,className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200",children:"Register"}),(0,l.jsx)("button",{onClick:A,disabled:x,className:"w-full flex items-center justify-center px-4 py-3 bg-white text-gray-700 font-medium rounded-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{}),(0,l.jsx)("span",{className:"ml-2",children:"Signing In..."})]}):"Log In"})]}),(0,l.jsx)("div",{className:"mt-8 text-center",children:(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"Powered by ZeroDev passkeys and account abstraction"})})]})}),{})}},8011:(e,t,s)=>{Promise.resolve().then(s.bind(s,7738))}},e=>{var t=t=>e(e.s=t);e.O(0,[380,587,315,358],()=>t(8011)),_N_E=e.O()}]);